<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Yodlr Registration Portal</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0"
      crossorigin="anonymous"
    />
    <link href="css/styles.css" rel="stylesheet" />
  </head>
  <body>
    <ul class="nav justify-content-center">
      <li class="nav-item">
        <a class="nav-link" href="/index.html">Home</a>
      </li>
      <li class="nav-item">
        <a class="nav-link active" href="/signup.html" aria-current="page">Register</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/admin.html">Admin</a>
      </li>
    </ul>
    <div class="container">
      <h1>Yodlr Registration Portal</h1>
      <div class="row">
        <div class="col-md-6 offset-md-3">
          <form id="registration_form">
            <div class="mb-3">
              <label for="email" class="form-label">Email Address</label>
              <input
                type="email"
                class="form-control"
                id="email"
                name="email"
                required
              />
            </div>
            <div class="mb-3">
              <label for="firstName" class="form-label">First Name</label>
              <input
                type="text"
                class="form-control"
                id="firstName"
                name="firstName"
                required
              />
            </div>
            <div class="mb-3">
              <label for="email" class="form-label">Last Name</label>
              <input
                type="text"
                class="form-control"
                id="lastName"
                name="lastName"
                required
              />
            </div>
            <button type="submit" class="btn btn-primary">Register</button>
          </form>
        </div>
      </div>
    </div>

    <script>
      window.onload = () => {
        const form = document.querySelector("#registration_form");
        form.addEventListener("submit", (e) => {
          e.preventDefault();
          const formData = new FormData(e.target);
          const formObj = {};
          for (const [k, v] of formData) {
            formObj[k] = v;
          }
          fetch("/users", {
            method: "POST",
            body: JSON.stringify(formObj),
            headers: {
              'Content-Type': 'application/json'
            }
          }).then((res) => {
            if (res.ok) {
              window.location = "/admin.html";
            }
          });
        });
      };
    </script>
  </body>
</html>
